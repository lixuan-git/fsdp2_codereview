var FINEDO={};FINEDO.RESULTCODE={success:"SUCCESS",fail:0};$(document.body).ready(function(){initUI()});function initUI(){$.each($("input"),function(){var a=$(this).attr("type");if("text"==a||"password"==a||"file"==a){$(this).attr("class","input-text")}});$.each($("textarea"),function(){$(this).attr("class","input-textarea")})}String.prototype.changeQuery=function(name,value){var reg=new RegExp("(^|)"+name+"=([^&]*)(|$)");var tmp=name+"="+value;if(this.match(reg)!=null){return this.replace(eval(reg),tmp)}else{if(this.match("[?]")){return this+"&"+tmp}else{return this+"?"+tmp}}};FINEDO.Action={doCommand:function(a,c,b){FINEDO.Mode.create();$.getJSON(a,function(d){FINEDO.Mode.destroy();if(b){$.messager.alert("提示",d.resultdesc)}if($.isFunction(c)){c(d)}})},doSearch:function(b,a,c){FINEDO.Mode.create();$("#"+b).datagrid({url:a,queryParams:c});FINEDO.Mode.destroy()},doDelete:function(a,c,b,d){if(b==""){$.messager.alert("提示","请选择要删除的记录！");return}message="您确定删除该记录吗？";$.messager.confirm("提示",message,function(e){if(e){FINEDO.Mode.create();$.getJSON(c+"?id="+b,function(f){FINEDO.Mode.destroy();$.messager.alert("提示",f.resultdesc);$("#"+a).datagrid("reload");if($.isFunction(d)){d()}})}})},doBatchDelete:function(c,g,b,h){var d=[];var e="您确定删除这些记录吗?";var f=$("#"+c).datagrid("getSelections");for(var a=0;a<f.length;a++){d.push(f[a][b])}if(d.length==0){$.messager.alert("提示","请选择要删除的记录！");return}$.messager.confirm("提示",e,function(i){if(i){FINEDO.Mode.create();$.getJSON(g+"?id="+d.join(","),function(j){FINEDO.Mode.destroy();$.messager.alert("提示",j.resultdesc);$("#"+c).datagrid("reload");if($.isFunction(h)){h()}})}})},doSort:function(b,a,c){FINEDO.Mode.create();$.post(a,c,function(d){FINEDO.Mode.destroy();$("#"+b).datagrid("reload")},"json")}};FINEDO.Mode={create:function(){$('<div class="datagrid-mask"></div>').css({display:"block",width:"100%",height:$(window).height()}).appendTo("body");$('<div class="datagrid-mask-msg"></div>').html("加载中，请稍等!").appendTo("body").css({display:"block",left:($(document.body).outerWidth(true)-190)/2,top:($(window).height()-45)/2})},destroy:function(){$(".datagrid-mask").remove();$(".datagrid-mask-msg").remove()}};function message(c,b,a){$.messager.alert(c,b,a)};